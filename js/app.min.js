(function(){function a(c){this._submitSelector=c.submitSelector||'input[type="submit"]';this._listenedBlock=c.listenedBlock||"body";this._resetForm=c.resetForm||true;this._beforeSend=c.beforeSend||null;this._resolve=c.resolve||null;this._reject=c.reject||null;this._maxFileSize=c.maxFileSize||2}a.prototype.init=function(){if(!document.querySelector(this._submitSelector)){return}$(this._listenedBlock).on("click",this.formListeners.bind(this));if($(this._listenedBlock).find('input[type="file"]').length){$(this._listenedBlock).change(this.uploadListener.bind(this))}};a.prototype.validateForm=function(f){var d=true;var c=false;var e=this;$('input[name!="submit"], textarea',$(f)).each(function(){var i=$(this).val();var h=$(this).attr("required");var j="";var g="";$(this).removeClass("form-fail");$(this).removeClass("form-success");if(i.length===0&&h){g="Поле "+($(this).attr("data-name")?'"'+$(this).attr("data-name")+'" ':"")+"обязательное!";d=false}else{if($(this).attr("name")=="email"&&i.length){j=/^([a-z0-9_\.-])+@[a-z0-9-]+\.([a-z]{2,4}\.)?[a-z]{2,4}$/i;if(j.test($(this).val())){$(this).addClass("form-success")}else{g="Введите корректный E-mail!";d=false}}else{if($(this).attr("name")=="phone"&&i.length){j=/^((8|\+7)[\- ]?)?(\(?\d{3}\)?[\- ]?)?[\d\- ]{7,10}$/i;if(j.test($(this).val())){$(this).addClass("form-success")}else{g="Введите корректный телефон!";d=false}}else{if($(this).attr("name")==="passCurr"&&i.length){c=this}else{if($(this).attr("name")==="passNew"&&i.length){if(i===$(c).val()){$(c).val("").addClass("form-fail").attr("placeholder","Новый пароль, не должен совпадать с текущим!");g="Новый пароль, не должен совпадать с текущим!"}else{$(this).addClass("form-success");$(c).addClass("form-success")}}else{if($(this).is("textarea")&&i.length<10&&i.length>0&&h){g="Сообщение слишком короткое!";d=false}else{if(h&&i.length){$(this).addClass("form-success")}}}}}}}if(g){$(this).attr("data-old-placeholder",$(this).attr("placeholder"));$(this).val("").attr("placeholder",g).addClass("form-fail");g='<span class="form-fail">'+g+"</span>";e.changeLabel(this,g,"span.placeholder")}});return d};a.prototype.uploadListener=function(f){var d=f.target;if(!d.matches('input[type="file"]')){return}var c=this.getFileSize(d);if(c<this._maxFileSize*1024*1024){return}alert("Файл слишком большой. Размер вашего файла "+(c/1024/1024).toFixed(2)+" MB. Загружайте файлы меньше "+this._maxFileSize+"MB.");$(d).val("")};a.prototype.getFileSize=function(c){var d;if(typeof ActiveXObject=="function"){d=(new ActiveXObject("Scripting.FileSystemObject")).getFile(c.value)}else{d=c.files[0]}return d.size};a.prototype.changeLabel=function(e,g,f){var d='label[for="'+$(e).attr("id")+'"] '+f||"";var c=$(d);if(c.length){c.each(function(){this.innerHTML=g})}};a.prototype.resetForms=function(e){var d;var c=this;if(e.tagName==="FORM"){d=$(e)}else{d=$("form",$(e))}d.each(function(){c.resetPlaceholders(this);if(c._resetForm){this.reset();c.triggerChange(this)}})};a.prototype.resetPlaceholders=function(e){var c=this;var d;if(e.tagName==="INPUT"){d=$(e)}else{d=$("input[name != submit]",$(e))}d.each(function(){var g=$(this).attr("name");var f=$(this).attr("data-old-placeholder");$(this).removeClass("form-success");$(this).removeClass("form-fail");if(!f){return}$(this).attr("placeholder",f);c.changeLabel(this,f,"span.placeholder")})};a.prototype.triggerChange=function(d){var c=null;if(d.tagName==="INPUT"){c=$(d)}else{c=$("input[name != submit]",$(d))}c.each(function(){$(this).trigger("change")})};a.prototype.formListeners=function(f){var d=f.target;if(!d.matches(this._submitSelector)){return}f.preventDefault();var c=d.closest("form");if(this.validateForm(c)){this.sendRequest(c,this._resolve,this._reject,this._beforeSend)}};a.prototype.sendRequest=function(e,g,f,d){var h=$(e).serializeArray();var c=this;if(d){d.call(this,h,e)}this.showPending(e);$.ajax({type:e.method,url:e.action,data:$.param(h),success:function(i){if(i){c.hidePending(e,c.showSuccess.bind(c,e));if(g){g.call(c,e,i)}}else{c.hidePending(e,c.showError.bind(c,e));if(f){f.call(c,e,i)}}c.resetForms(e)},error:function(i){c.hidePending(e,c.showError.bind(c,e));c.resetForms(e)}})};a.prototype.showError=function(c){var d=$(".err-block",$(c));$(".form-success",$(c)).removeClass("form-success");d.fadeIn("normal");setTimeout(function(){d.fadeOut("normal")},10000)};a.prototype.showSuccess=function(d){var c=$(".succ-block",$(d));$(".form-success",$(d)).removeClass("form-success");c.fadeIn("normal");setTimeout(function(){c.fadeOut("normal")},10000)};a.prototype.showPending=function(d){var c=$(".pend-block",$(d));c.fadeIn("normal")};a.prototype.hidePending=function(d,e){var c=$(".pend-block",$(d));if(!c[0]){e();return}c.fadeOut("normal","linear",e)};$.fn.formController=function(){var c=typeof arguments[0]==="object"?arguments[0]:{};var d=[];$(this).each(function(){if(b(this)){c.listenedBlock=this}var e=new a(c);e.init();d.push(e)});return d};function b(c){return(typeof HTMLElement==="object"?c instanceof HTMLElement:c&&typeof c==="object"&&c!==null&&c.nodeType===1&&typeof c.nodeName==="string")}})();$(document).ready(function(){(function(){function a(b){this._listenedBlock=b.listenedBlock||document.body;this._translationElementSelector=b.translation||false}a.prototype.init=function(){$(this._listenedBlock).on("click",this.anchorClickListener.bind(this))};a.prototype.anchorClickListener=function(i){var d=i.target;var b=d.closest('a[href*="#"]:not([data-scroll="disable"])');if(!b){return}var g=b.closest('a[href^="#"]');var f=window.location.origin+window.location.pathname;var c=b.href.slice(0,b.href.indexOf("#"));if(f===c){g=b}if(!g||g.hash.length<2){return}i.preventDefault();var h=g.hash;var j=this.getTranslation(g);if(!document.querySelector(h)){return}this.smoothScroll(h,j)};a.prototype.getTranslation=function(b){var c=0;if(b.hasAttribute("data-translation")){c=b.getAttribute("data-translation")}else{if(this._translationElementSelector){$(this._translationElementSelector).each(function(){c+=this.offsetHeight})}}return c};a.prototype.smoothScroll=function(b,c){$("html, body").animate({scrollTop:$(b).offset().top-(c||0)},500)};(function(){var b=new a({listenedBlock:".page-wrap"});b.init()})();(function(){var d=new a({listenedBlock:document.getElementById("#m-menu")});c();function c(){var j=$("nav#m-menu");var g=$("#hamburger");var l=$("#m-menu-btn-wrapper");var f=false;var k=b();var h=document.documentElement||document.body;j.mmenu({extensions:["fullscreen"],offCanvas:{moveBackground:false,position:"top",zposition:"front"},navbar:false,navbars:[{content:['<div class="logo"><a href="/"><img src="images/logo.png" alt="logo"></a></div>'],height:2,position:"top"},{content:['<a href="#call-back" class="btn__callback__mobile" data-role="lightbox"><div class="icon__mobile_big"></div><span>Перезвоните мне!</span></a>'],height:4,position:"bottom"}]});var e=false;j.find("li > a").on("click",function(m){e=this.hash});var i=j.data("mmenu");i.bind("closed",function(){if(e){d.smoothScroll(e);e=false}h.style.paddingRight="";l[0].style.right=0;f=false});g.on("click",function(){if(f){i.close();f=false}else{i.open();h.style.paddingRight=k+"px";l[0].style.right=k+"px";f=true}})}function b(){var f=document.createElement("div");var e=0;$(f).css({width:"100px",height:"100px",overflowY:"scroll",visibility:"hidden"});document.body.appendChild(f);e=f.offsetWidth-f.clientWidth;document.body.removeChild(f);return e}})()})();(function(){var a=$("form");var b=$('input[name="phone"]');b.mask("+7 (999) 999-99-99");a.formController()})();(function(){var a=$('[data-role="lightbox"]');a.fancybox({padding:0,margin:0,tpl:{closeBtn:'<span class="btn__close"></span>'}})})();(function(){var a=$('[data-role="slideDown"]');a.on("click",function(){var b=$(this).attr("data-target");$(this).fadeOut();$(b).slideDown()})})();(function(){function b(c){this._tmpl=c||'<div id="scrollUp"><i class="upButton"></i></div>';this._isActive=false;this.init()}b.prototype.init=function(){this._$btn=$(this._tmpl);$("body").append(this._$btn);this.scrollBtnToggler();this._$btn.on("click",this.scrollTop.bind(this));$(window).on("scroll",this.scrollBtnToggler.bind(this))};b.prototype.scrollBtnToggler=function(){if($(document).scrollTop()>$(window).height()&&!this._isActive){this._$btn.fadeIn({queue:false,duration:400}).animate({bottom:"40px"},400);this._isActive=true}else{if($(document).scrollTop()<$(window).height()&&this._isActive){this._$btn.fadeOut({queue:false,duration:400}).animate({bottom:"-20px"},400);this._isActive=false}}};b.prototype.scrollTop=function(){$("html, body").animate({scrollTop:0},500);return false};var a=new b()})()});