/*!
 * fancyBox - jQuery Plugin
 * version: 3.0.0 Beta 1 (Tue, 29 Jan 2013)
 * @requires jQuery v1.7 or later
 *
 * Examples at http://fancyapps.com/fancybox/
 * License: www.fancyapps.com/fancybox/#license
 *
 * Copyright 2013 Janis Skarnelis - janis@fancyapps.com
 *
 */
(function(v,s,x,A){var C=x(v),F=x(s),r=x("html");var q=x.fancybox=function(){q.open.apply(this,arguments)};var z=q.isTouch=(s.createTouch!==A||v.ontouchstart!==A);var w=function(a){return a&&a.hasOwnProperty&&a instanceof x};var D=function(a){return a&&x.type(a)==="string"};var u=function(a){return D(a)&&a.indexOf("%")>0};var t=function(a,b){var c=parseFloat(a,10)||0;if(b&&u(a)){c=q.getViewport()[b]/100*c}return Math.ceil(c)};var y=function(b,a){return t(b,a)+"px"};var B=Date.now||function(){return +new Date};var E=function(a){var c=D(a)?x(a):a;if(c&&c.length){c.removeClass("fancybox-wrap").stop(true).trigger("onReset").hide().unbind();try{c.find("iframe").unbind().attr("src",z?"":"//about:blank");setTimeout(function(){c.empty().remove();if(q.lock&&!q.coming&&!q.current){var e,d;x(".fancybox-margin").removeClass("fancybox-margin");e=C.scrollTop();d=C.scrollLeft();r.removeClass("fancybox-lock");q.lock.remove();q.lock=null;C.scrollTop(e).scrollLeft(d)}},150)}catch(b){}}};x.extend(q,{version:"3.0.0",defaults:{theme:"default",padding:15,margin:[30,55,30,55],loop:true,arrows:true,closeBtn:true,expander:!z,caption:{type:"outside"},overlay:{closeClick:true,speedIn:0,speedOut:250,showEarly:true,css:{}},helpers:{},width:800,height:450,minWidth:100,minHeight:100,maxWidth:99999,maxHeight:99999,aspectRatio:false,fitToView:true,autoHeight:true,autoWidth:true,autoResize:true,autoCenter:!z,topRatio:0.5,leftRatio:0.5,openEffect:"elastic",openSpeed:350,openEasing:"easeOutQuad",closeEffect:"elastic",closeSpeed:350,closeEasing:"easeOutQuad",nextEffect:"elastic",nextSpeed:350,nextEasing:"easeOutQuad",prevEffect:"elastic",prevSpeed:350,prevEasing:"easeOutQuad",autoPlay:false,playSpeed:3000,onCancel:x.noop,beforeLoad:x.noop,afterLoad:x.noop,beforeShow:x.noop,afterShow:x.noop,beforeClose:x.noop,afterClose:x.noop,ajax:{dataType:"html",headers:{"X-fancyBox":true}},iframe:{scrolling:"auto",preload:true},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-inner"></div></div>',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen allowtransparency="true"></iframe>',error:'<p class="fancybox-error">{{ERROR}}</p>',closeBtn:'<a title="{{CLOSE}}" class="fancybox-close" href="javascript:;"></a>',next:'<a title="{{NEXT}}" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="{{PREV}}" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},locale:"en",locales:{en:{CLOSE:"Close",NEXT:"Next",PREV:"Previous",ERROR:"The requested content cannot be loaded. <br/> Please try again later.",EXPAND:"Display actual size",SHRINK:"Fit to the viewport",PLAY_START:"Start slideshow",PLAY_STOP:"Pause slideshow"},de:{CLOSE:"Schliessen",NEXT:"Vorwärts",PREV:"Zurück",ERROR:"Die angeforderten Daten konnten nicht geladen werden. <br/> Bitte versuchen Sie es später nochmal.",EXPAND:"",SHRINK:"",PLAY_START:"",PLAY_STOP:""}},index:0,content:null,href:null,wrapCSS:"",modal:false,locked:true,preload:3,mouseWheel:true,scrolling:"auto",scrollOutside:true},current:null,coming:null,group:[],index:0,isActive:false,isOpen:false,isOpened:false,isMaximized:false,player:{timer:null,isActive:false},ajaxLoad:null,imgPreload:null,helpers:{},open:function(b,a){if(!b){return}if(false===q.close(true)){return}if(!x.isPlainObject(a)){a={}}q.opts=x.extend(true,{},q.defaults,a);q.populate(b);if(q.group.length){q._start(q.opts.index)}},populate:function(b){var a=[];if(!x.isArray(b)){b=[b]}x.each(b,function(g,h){var i=x.extend(true,{},q.opts),e,j,f,d,c;if(x.isPlainObject(h)){e=h}else{if(D(h)){e={href:h}}else{if(w(h)||x.type(h)==="object"&&h.nodeType){j=x(h);e=x(j).get(0);if(!e.href){e={href:h}}e=x.extend({href:j.data("fancybox-href")||j.attr("href")||e.href,title:j.data("fancybox-title")||j.attr("title")||e.title,type:j.data("fancybox-type"),element:j},j.data("fancybox-options"))}else{return}}}if(!e.type&&(e.content||e.href)){e.type=e.content?"html":q.guessType(j,e.href)}f=e.type||q.opts.type;if(f==="image"||f==="swf"){i.autoWidth=i.autoHeight=false;i.scrolling="visible"}if(f==="image"){i.aspectRatio=true}if(f==="iframe"){i.autoWidth=false;i.scrolling=z?"scroll":"visible"}if(b.length<2){i.margin=30}e=x.extend(true,{},i,e);d=e.margin;c=e.padding;if(x.type(d)==="number"){e.margin=[d,d,d,d]}if(x.type(c)==="number"){e.padding=[c,c,c,c]}if(e.modal){x.extend(true,e,{closeBtn:false,closeClick:false,nextClick:false,arrows:false,mouseWheel:false,keys:null,overlay:{closeClick:false}})}if(e.autoSize!==A){e.autoWidth=e.autoHeight=!!e.autoSize}if(e.width==="auto"){e.autoWidth=true}if(e.height==="auto"){e.autoHeight=true}a.push(e)});q.group=q.group.concat(a)},cancel:function(){var a=q.coming;if(!a||false===q.trigger("onCancel")){return}q.hideLoading();if(q.ajaxLoad){q.ajaxLoad.abort()}if(q.imgPreload){q.imgPreload.onload=q.imgPreload.onerror=null}if(a.wrap){E(a.wrap)}q.ajaxLoad=q.imgPreload=q.coming=null;if(!q.current){q._afterZoomOut(a)}},close:function(a){if(a&&x.type(a)==="object"){a.preventDefault()}q.cancel();if(!q.isActive||q.coming||false===q.trigger("beforeClose")){return}q.unbind();q.isClosing=true;if(q.lock){q.lock.css("overflow","hidden")}if(!q.isOpen||a===true){q._afterZoomOut()}else{q.isOpen=q.isOpened=false;q.transitions.close()}},prev:function(a){var b=q.current;if(b){q.jumpto(b.index-1,(D(a)?a:b.direction.prev))}},next:function(a){var b=q.current;if(b){q.jumpto(b.index+1,(D(a)?a:b.direction.next))}},jumpto:function(c,a){var b=q.current;if(!(q.coming&&q.coming.index===c)){q.cancel();if(b.index==c){a=null}else{if(!a){a=b.direction[c>b.index?"next":"prev"]}}q.direction=a;q._start(c)}}});x.extend(q,{guessType:function(b,d){var a=b&&b.prop("class")?b.prop("class").match(/fancybox\.(\w+)/):0,c=false;if(a){return a[1]}if(D(d)){if(d.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp)((\?|#).*)?$)/i)){c="image"}else{if(d.match(/\.(swf)((\?|#).*)?$/i)){c="swf"}else{if(d.charAt(0)==="#"){c="inline"}}}}else{if(D(b)){c="html"}}return c},trigger:function(c,a){var d,b=a||q.coming||q.current;if(!b){return}if(x.isFunction(b[c])){d=b[c].apply(b,Array.prototype.slice.call(arguments,1))}if(d===false||(c==="afterClose"&&q.isActive)){return false}if(b.helpers){x.each(b.helpers,function(f,g){var h=q.helpers[f],e;if(g&&h&&x.isFunction(h[c])){e=x.extend(true,{},h.defaults,g);h.opts=e;h[c](e,b)}})}x.event.trigger(c)},reposition:function(b,e){var c=e||q.current,d=c&&c.wrap,a;if(q.isOpen&&d){a=q._getPosition(c);if(b===false||(b&&b.type==="scroll")){d.stop(true).animate(a,200).css("overflow","visible")}else{d.css(a)}}},update:function(a){var c=(a&&a.type),e=B(),b=q.current,d;if(!b||!q.isOpen){return}if(c==="scroll"){if(q.wrap.outerHeight(true)>q.getViewport().h){return}if(q.didUpdate){clearTimeout(q.didUpdate)}q.didUpdate=setTimeout(function(){q.reposition(a);q.didUpdate=null},50);return}if(q.lock){q.lock.css("overflow","hidden")}q._setDimension();q.reposition(a);if(q.lock){q.lock.css("overflow","auto")}if(b.caption.type==="float"){d=q.getViewport().w-(q.wrap.outerWidth(true)-q.inner.width());b.caption.wrap.css("width",d).css("marginLeft",(d*0.5-q.inner.width()*0.5)*-1)}if(b.expander){if(b.canShrink){x(".fancybox-expand").show().attr("title",b.locales[b.locale].SHRINK)}else{if(b.canExpand){x(".fancybox-expand").show().attr("title",b.locales[b.locale].EXPAND)}else{x(".fancybox-expand").hide()}}}q.trigger("onUpdate")},toggle:function(b){var a=q.current;if(a&&q.isOpen){q.current.fitToView=x.type(b)==="boolean"?b:!q.current.fitToView;q.update(true)}},hideLoading:function(){x("#fancybox-loading").remove()},showLoading:function(){var a,b;q.hideLoading();a=x('<div id="fancybox-loading"></div>').click(q.cancel).appendTo("body");if(!q.defaults.fixed){b=q.getViewport();a.css({position:"absolute",top:(b.h*0.5)+b.y,left:(b.w*0.5)+b.x})}},getViewport:function(){var a;if(q.lock){a={x:q.lock.scrollLeft(),y:q.lock.scrollTop(),w:q.lock[0].clientWidth,h:q.lock[0].clientHeight}}else{a={x:C.scrollLeft(),y:C.scrollTop(),w:z&&v.innerWidth?v.innerWidth:C.width(),h:z&&v.innerHeight?v.innerHeight:C.height()}}return a},unbind:function(){if(w(q.wrap)){q.wrap.unbind(".fb")}if(w(q.inner)){q.inner.unbind(".fb")}F.unbind(".fb");C.unbind(".fb")},rebind:function(){var a=q.current,b;q.unbind();if(!a||!q.isOpen){return}C.bind("orientationchange.fb"+(z?"":" resize.fb")+(a.autoCenter&&!a.locked?" scroll.fb":""),q.update);b=a.keys;if(b){F.bind("keydown.fb",function(c){var e=c.which||c.keyCode,d=c.target||c.srcElement;if(e===27&&q.coming){return false}if(!c.ctrlKey&&!c.altKey&&!c.shiftKey&&!c.metaKey&&!(d&&(d.type||x(d).is("[contenteditable]")))){x.each(b,function(g,f){if(f[e]!==A){c.preventDefault();if(a.group.length>1){q[g](f[e])}return false}if(x.inArray(e,f)>-1){c.preventDefault();if(g==="play"){q.slideshow.toggle()}else{q[g]()}return false}})}})}q.lastScroll=B();if(a.mouseWheel&&q.group.length>1){q.wrap.bind("DOMMouseScroll.fb mousewheel.fb MozMousePixelScroll.fb",function(d){var c=d.originalEvent,e=c.target||0,i=(c.wheelDelta||c.detail||0),g=c.wheelDeltaX||0,h=c.wheelDeltaY||0,f=B();if(((e&&e.style&&!(e.style.overflow&&e.style.overflow==="hidden")&&((e.clientWidth&&e.scrollWidth>e.clientWidth)||(e.clientHeight&&e.scrollHeight>e.clientHeight))))){return}if(i===0||(q.current&&q.current.canShrink)){return}c.stopPropagation();if(q.lastScroll&&(f-q.lastScroll)<80){q.lastScroll=f;return}q.lastScroll=f;if(c.axis){if(c.axis===c.HORIZONTAL_AXIS){g=i*-1}else{if(c.axis===c.VERTICAL_AXIS){h=i*-1}}}if(g===0){if(h>0){q.prev("down")}else{q.next("up")}}else{if(g>0){q.prev("right")}else{q.next("left")}}})}q.touch.init()},rebuild:function(){var a=q.current;a.wrap.find(".fancybox-nav, .fancybox-close, .fancybox-expand").remove();if(a.arrows&&q.group.length>1){if(a.loop||a.index>0){x(q._translate(a.tpl.prev)).appendTo(q.inner).bind("click.fb",q.prev)}if(a.loop||a.index<q.group.length-1){x(q._translate(a.tpl.next)).appendTo(q.inner).bind("click.fb",q.next)}}if(a.closeBtn){x(q._translate(a.tpl.closeBtn)).appendTo(q.wrap).bind("click.fb",q.close)}if(a.expander&&a.type==="image"){x('<a title="Expand image" class="fancybox-expand" href="javascript:;"></a>').appendTo(q.inner).bind("click.fb",q.toggle);if(!a.canShrink&&!a.canExpand){}}},_start:function(c){var b,a;if(q.opts.loop){if(c<0){c=q.group.length+(c%q.group.length)}c=c%q.group.length}b=q.group[c];if(!b){return false}b=x.extend(true,{},q.opts,b);b.group=q.group;b.index=c;q.coming=b;if(false===q.trigger("beforeLoad")){q.coming=null;return}q.isActive=true;q._build();F.bind("keydown.loading",function(d){if((d.which||d.keyCode)===27){F.unbind(".loading");d.preventDefault();q.cancel()}});if(b.overlay&&b.overlay.showEarly){q.overlay.open(b.overlay)}a=b.type;if(a==="image"){q._loadImage()}else{if(a==="ajax"){q._loadAjax()}else{if(a==="iframe"){q._loadIframe()}else{if(a==="inline"){q._loadInline()}else{if(a==="html"||a==="swf"){q._afterLoad()}else{q._error()}}}}}},_build:function(){var c=q.coming,a=c.caption.type,b,e,f,d;c.wrap=b=x('<div class="fancybox-wrap"></div>').appendTo(c.parent||"body").addClass("fancybox-"+c.theme);c.inner=e=x('<div class="fancybox-inner"></div>').appendTo(b);c[a==="outside"||a==="float"?"inner":"wrap"].addClass("fancybox-skin fancybox-"+c.theme+"-skin");if(c.locked&&c.overlay&&q.defaults.fixed){if(!q.lock){q.lock=x('<div id="fancybox-lock"></div>').appendTo(b.parent())}q.lock.unbind().append(b);if(c.overlay.closeClick){q.lock.click(function(g){if(x(g.target).is(q.lock)){q.close()}})}if(F.height()>C.height()||r.css("overflow-y")==="scroll"){x("*:visible").filter(function(){return(x(this).css("position")==="fixed"&&!x(this).hasClass("fancybox-overlay")&&x(this).attr("id")!=="fancybox-lock")}).addClass("fancybox-margin");r.addClass("fancybox-margin")}f=C.scrollTop();d=C.scrollLeft();r.addClass("fancybox-lock");C.scrollTop(f).scrollLeft(d)}q.trigger("onReady")},_error:function(a){if(!q.coming){return}x.extend(q.coming,{type:"html",autoWidth:true,autoHeight:true,closeBtn:true,minWidth:0,minHeight:0,padding:[15,15,15,15],scrolling:"visible",hasError:a,content:q._translate(q.coming.tpl.error)});q._afterLoad()},_loadImage:function(){var a=q.imgPreload=new Image();a.onload=function(){this.onload=this.onerror=null;x.extend(q.coming,{width:this.width,height:this.height,content:x(this).addClass("fancybox-image")});q._afterLoad()};a.onerror=function(){this.onload=this.onerror=null;q._error("image")};a.src=q.coming.href;if(a.complete!==true||a.width<1){q.showLoading()}},_loadAjax:function(){var b=q.coming,c=b.href,a,d;a=c.split(/\s+/,2);c=a.shift();d=a.shift();q.showLoading();q.ajaxLoad=x.ajax(x.extend({},b.ajax,{url:b.href,error:function(f,e){if(q.coming&&e!=="abort"){q._error("ajax",f)}else{q.hideLoading()}},success:function(f,e){if(e==="success"){if(d){f=x("<div>").html(f).find(d)}b.content=f;q._afterLoad()}}}))},_loadIframe:function(){var b=q.coming,a;b.content=a=x(b.tpl.iframe.replace(/\{rnd\}/g,new Date().getTime())).attr("scrolling",z?"auto":b.iframe.scrolling);if(b.iframe.preload){q.showLoading();q._setDimension(b);b.wrap.addClass("fancybox-tmp");a.one("load.fb",function(){if(b.iframe.preload){x(this).data("ready",1);x(this).bind("load.fb",q.update);q._afterLoad()}})}a.attr("src",b.href).appendTo(b.inner);if(!b.iframe.preload){q._afterLoad()}else{if(a.data("ready")!==1){q.showLoading()}}},_loadInline:function(){var a=q.coming,b=a.href;a.content=x(D(b)?b.replace(/.*(?=#[^\s]+$)/,""):b);if(a.content.length){q._afterLoad()}else{q._error()}},_preloadImages:function(){var a=q.group,b=q.current,f=a.length,d=b.preload?Math.min(b.preload,f-1):0,c,e;for(e=1;e<=d;e+=1){c=a[(b.index+e)%f];if(c&&c.type==="image"&&c.href){new Image().src=c.href}}},_afterLoad:function(){var a=q.coming,b=q.current;F.unbind(".loading");if(!a||q.isActive===false||false===q.trigger("afterLoad",a,b)){q.hideLoading();if(a&&a.wrap){E(a.wrap)}if(!b){q._afterZoomOut(a)}q.coming=null;return}x.extend(q,{wrap:a.wrap.addClass("fancybox-type-"+a.type+" fancybox-"+(z?"mobile":"desktop")+" fancybox-"+a.theme+"-"+(z?"mobile":"desktop")+" "+a.wrapCSS),inner:a.inner,current:a,previous:b});q._prepare();q.trigger("beforeShow",a,b);q.isOpen=false;q.coming=null;q._setDimension();q.hideLoading();if(a.overlay&&!q.overlay.el){q.overlay.open(a.overlay)}q.transitions.open()},_prepare:function(){var i=q.current,h=i.content||"",b=i.wrap,o=i.inner,m=i.margin,e=i.padding,d=i.href,f=i.type,k=i.scrolling,a=i.caption,l=i.title,n=a.type,c="fancybox-placeholder",g="fancybox-display",j;if(f!=="iframe"&&w(h)&&h.length){if(!h.data(c)){h.data(g,h.css("display")).data(c,x('<div class="'+c+'"></div>').insertAfter(h).hide())}h=h.show().detach();i.wrap.bind("onReset",function(){if(x(this).find(h).length){h.css("display",h.data(g)).replaceAll(h.data(c)).data(c,false).data(g,false)}})}if(f==="swf"){h='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+d+'"></param>';j="";x.each(i.swf,function(H,p){h+='<param name="'+H+'" value="'+p+'"></param>';j+=" "+H+'="'+p+'"'});h+='<embed src="'+d+'" type="application/x-shockwave-flash" width="100%" height="100%"'+j+"></embed></object>"}if(!(w(h)&&h.parent().is(i.inner))){i.inner.append(h);i.content=i.inner.children(":last")}x.each(["Top","Right","Bottom","Left"],function(p,H){if(m[p]){b.css("margin"+H,y(m[p]))}if(e[p]){if(!(H==="Bottom"&&n==="outside")){b.css("padding"+H,y(e[p]))}if(n==="outside"||n==="float"){o.css("border"+H+"Width",y(e[p]));if(H==="Top"||H==="Left"){o.css("margin"+H,y(e[p]*-1))}}}});if(x.isFunction(l)){l=l.call(i.element,i)}if(D(l)&&x.trim(l)!==""){i.caption.wrap=x('<div class="fancybox-title fancybox-title-'+n+'-wrap">'+l+"</div>").appendTo(i[n==="over"?"inner":"wrap"]);if(n==="float"){i.caption.wrap.width(q.getViewport().w-(q.wrap.outerWidth(true)-q.inner.width())).wrapInner("<div></div>")}}},_setDimension:function(a){var o=q.getViewport(),X=a||q.current,Y=X.wrap,b=X.inner,W=X.width,ac=X.height,ak=X.minWidth,ae=X.minHeight,j=X.maxWidth,aa=X.maxHeight,ad=X.margin,ag=X.scrollOutside?X.scrollbarWidth:0,ad=X.margin,m=X.padding,al=X.scrolling,l=1,c,e,k,n,af,ai,ab,Z,p,f,aj,h,ah,g,d;al=al.split(",");c=al[0];e=al[1]||c;X.inner.css("overflow-x",c==="yes"?"scroll":(c==="no"?"hidden":c)).css("overflow-y",e==="yes"?"scroll":(e==="no"?"hidden":e));n=ad[1]+ad[3]+m[1]+m[3];k=ad[0]+ad[2]+m[0]+m[2];ak=t(u(ak)?t(ak,"w")-n:ak);j=t(u(j)?t(j,"w")-n:j);ae=t(u(ae)?t(ae,"h")-k:ae);aa=t(u(aa)?t(aa,"h")-k:aa);af=t(u(W)?t(W,"w")-n:W);ai=t(u(ac)?t(ac,"h")-k:ac);if(X.fitToView){j=Math.min(j,t("100%","w")-n);aa=Math.min(aa,t("100%","h")-k)}f=o.w;aj=o.h;if(X.type==="iframe"){Z=X.content;Y.removeClass("fancybox-tmp");if((X.autoWidth||X.autoHeight)&&Z&&Z.data("ready")===1){try{if(Z[0].contentWindow&&Z[0].contentWindow.document.location){p=Z.contents().find("body");b.addClass("fancybox-tmp");b.width(screen.width-n).height(99999);if(ag){p.css("overflow-x","hidden")}if(X.autoWidth){af=p.outerWidth(true)}if(X.autoHeight){ai=p.outerHeight(true)}b.removeClass("fancybox-tmp")}}catch(i){}}}else{if((X.autoWidth||X.autoHeight)&&!(X.type==="image"||X.type==="swf")){b.addClass("fancybox-tmp");if(X.autoWidth){b.width("auto")}else{b.width(j)}if(X.autoHeight){b.height("auto")}else{b.height(aa)}if(X.autoWidth){af=b[0].scrollWidth||b.width()}if(X.autoHeight){ai=b[0].scrollHeight||b.height()}b.removeClass("fancybox-tmp")}}W=af;ac=ai;ab=af/ai;if(!X.autoResize){Y.css({width:y(W),height:"auto"});b.css({width:y(W),height:y(ac)});return}if(X.aspectRatio){if(W>j){W=j;ac=W/ab}if(ac>aa){ac=aa;W=ac*ab}if(W<ak){W=ak;ac=W/ab}if(ac<ae){ac=ae;W=ac*ab}}else{W=Math.max(ak,Math.min(W,j));if(X.autoHeight&&X.type!=="iframe"){b.width(W);ai=ac=b[0].scrollHeight}ac=Math.max(ae,Math.min(ac,aa))}Y.css({width:y(W),height:"auto"});b.css({width:y(W),height:y(ac)});h=t(Y.outerWidth(true));ah=t(Y.outerHeight(true));if(X.fitToView){if(X.aspectRatio){while((h>f||ah>aj)&&W>ak&&ac>ae){if(l++>30){break}ac=Math.max(ae,Math.min(aa,ac-10));W=t(ac*ab);if(W<ak){W=ak;ac=t(W/ab)}if(W>j){W=j;ac=t(W/ab)}Y.css({width:y(W)});b.css({width:y(W),height:y(ac)});h=t(Y.outerWidth(true));ah=t(Y.outerHeight(true))}}else{W=Math.max(ak,Math.min(W,W-(h-f)));ac=Math.max(ae,Math.min(ac,ac-(ah-aj)))}}if(ag&&c==="auto"&&(ac<b[0].scrollHeight||(w(X.content)&&X.content[0]&&ac<X.content[0].offsetHeight))&&(W+n+ag)<j){W+=ag}Y.css({width:W});b.css({width:y(W),height:y(ac)});h=t(Y.outerWidth(true));ah=t(Y.outerHeight(true));g=(h>f||ah>aj)&&W>ak&&ac>ae;d=(h<f||ah<aj)&&(X.aspectRatio?(W<j&&ac<aa&&W<af&&ac<ai):((W<j||ac<aa)&&(W<af||ac<ai)));X.canShrink=g;X.canExpand=d;if(!Z&&X.autoHeight&&ac>ae&&ac<aa&&!d){b.height("auto")}},_getPosition:function(f){var b=f||q.current,e=b.wrap,g=q.getViewport(),a={},c=g.y,d=g.x;a={top:y(Math.max(c,c+((g.h-e.outerHeight(true))*b.topRatio))),left:y(Math.max(d,d+((g.w-e.outerWidth(true))*b.leftRatio))),width:y(e.width()),height:y(e.height())};return a},_afterZoomIn:function(){var a=q.current;if(!a){return}if(q.lock){q.lock.css("overflow","auto")}q.isOpen=q.isOpened=true;q.rebuild();q.rebind();if(a.caption&&a.caption.wrap){a.caption.wrap.show().css({visibility:"visible",opacity:0,left:0}).animate({opacity:1},"fast")}q.update();q.wrap.css("overflow","visible").addClass("fancybox-open").focus();q[q.wrap.hasClass("fancybox-skin")?"wrap":"inner"].addClass("fancybox-"+a.theme+"-skin-open");if(a.caption&&a.caption.wrap){a.caption.wrap.show().css("left",0).animate({opacity:1},"fast")}if(a.margin[2]>0){x('<div class="fancybox-spacer"></div>').css("height",y(a.margin[2]-2)).appendTo(q.wrap)}q.trigger("afterShow");q._preloadImages();if(a.autoPlay&&!q.slideshow.isActive){q.slideshow.start()}},_afterZoomOut:function(a){var b=function(){E(".fancybox-wrap")};q.hideLoading();a=a||q.current;if(a&&a.wrap){a.wrap.hide()}x.extend(q,{group:[],opts:{},coming:null,current:null,isActive:false,isOpened:false,isOpen:false,isClosing:false,wrap:null,skin:null,inner:null});q.trigger("afterClose",a);if(!q.coming&&!q.current){if(a.overlay){q.overlay.close(a.overlay,b)}else{b()}}},_translate:function(a){var b=q.coming||q.current,c=b.locales[b.locale];return a.replace(/\{\{(\w+)\}\}/g,function(f,d){var e=c[d];if(e===A){return f}return e})}});q.transitions={_getOrig:function(i){var h=i||q.current,b=h.wrap,g=h.element,d=h.orig,e=q.getViewport(),f={},a=50,c=50;if(!d&&g&&g.is(":visible")){d=g.find("img:first:visible");if(!d.length){d=g}}if(!d&&h.group[0].element){d=h.group[0].element.find("img:visible:first")}if(w(d)&&d.is(":visible")){f=d.offset();if(d.is("img")){a=d.outerWidth();c=d.outerHeight()}if(q.lock){f.top-=C.scrollTop();f.left-=C.scrollLeft()}}else{f.top=e.y+(e.h-c)*h.topRatio;f.left=e.x+(e.w-a)*h.leftRatio}f={top:y(f.top-(b.outerHeight(true)-b.height())*0.5),left:y(f.left-(b.outerWidth(true)-b.width())*0.5),width:y(a),height:y(c)};return f},_getCenter:function(f){var b=f||q.current,e=b.wrap,g=q.getViewport(),a={},c=g.y,d=g.x;a={top:y(Math.max(c,c+((g.h-e.outerHeight(true))*b.topRatio))),left:y(Math.max(d,d+((g.w-e.outerWidth(true))*b.leftRatio))),width:y(e.width()),height:y(e.height())};return a},_prepare:function(d,a){var b=d||q.current,c=b.wrap,e=b.inner;c.height(c.height());e.css({width:(e.width()*100/c.width())+"%",height:(Math.floor((e.height()*100/c.height())*100)/100)+"%"});if(a===true){c.find(".fancybox-title, .fancybox-spacer, .fancybox-close, .fancybox-nav").remove()}e.css("overflow","hidden")},fade:function(b,c){var a=this._getCenter(b),d={opacity:0};return((c==="open"||c==="changeIn")?[x.extend(a,d),{opacity:1}]:[{},d])},drop:function(a,b){var c=x.extend(this._getCenter(a),{opacity:1}),d=x.extend({},c,{opacity:0,top:y(Math.max(q.getViewport().y-a.margin[0],t(c.top)-200))});return((b==="open"||b==="changeIn")?[d,c]:[{},d])},elastic:function(k,i){var a=k.wrap,l=k.margin,g=q.getViewport(),f=q.direction,h=this._getCenter(k),c=x.extend({},h),d=x.extend({},h),b,j,e;if(i==="open"){c=this._getOrig(k)}else{if(i==="close"){c={};d=this._getOrig(k)}else{if(f){b=(f==="up"||f==="down")?"top":"left";j=(f==="up"||f==="left")?200:-200;if(i==="changeIn"){e=t(c[b])+j;if(f==="left"){e=Math.min(e,g.x+g.w-l[3]-a.outerWidth()-1)}else{if(f==="right"){e=Math.max(e,g.x-l[1])}else{if(f==="up"){e=Math.min(e,g.y+g.h-l[0]-a.outerHeight()-1)}else{e=Math.max(e,g.y-l[2])}}}c[b]=e}else{e=t(a.css(b))-j;c={};if(f==="left"){e=Math.max(e,g.x-l[3])}else{if(f==="right"){e=Math.min(e,g.x+g.w-l[1]-a.outerWidth()-1)}else{if(f==="up"){e=Math.max(e,g.y-l[0])}else{e=Math.min(e,g.y+g.h-l[2]-a.outerHeight()-1)}}}d[b]=e}}}}if(i==="open"||i==="changeIn"){c.opacity=0;d.opacity=1}else{d.opacity=0}return[c,d]},open:function(){var c=q.current,f=q.previous,d=q.direction,g,a,e,b,h;if(f){f.wrap.stop(true).removeClass("fancybox-opened")}if(q.isOpened){g=c.nextEffect,e=c.nextSpeed;b=c.nextEasing;h="changeIn"}else{g=c.openEffect;e=c.openSpeed;b=c.openEasing;h="open"}if(g==="none"){q._afterZoomIn()}else{a=this[g](c,h);if(g==="elastic"){this._prepare(c)}c.wrap.css(a[0]);c.wrap.animate(a[1],e,b,q._afterZoomIn)}if(f){if(!q.isOpened||f.prevEffect==="none"){E(x(".fancybox-wrap").not(c.wrap))}else{f.wrap.stop(true).removeClass("fancybox-opened");a=this[f.prevEffect](f,"changeOut");this._prepare(f,true);f.wrap.animate(a[1],f.prevSpeed,f.prevEasing,function(){E(f.wrap)})}}},close:function(){var b=q.current,c=b.wrap.stop(true).removeClass("fancybox-opened"),d=b.closeEffect,a;if(d==="none"){return q._afterZoomOut()}this._prepare(b,true);a=this[d](b,"close");c.addClass("fancybox-animating").animate(a[1],b.closeSpeed,b.closeEasing,q._afterZoomOut)}};q.slideshow={_clear:function(){if(this._timer){clearTimeout(this._timer)}},_set:function(){this._clear();if(q.current&&this.isActive){this._timer=setTimeout(q.next,this._speed)}},_timer:null,_speed:null,isActive:false,start:function(b){var a=q.current;if(a&&(a.loop||a.index<a.group.length-1)){this.stop();this.isActive=true;this._speed=b||a.playSpeed;F.bind({"beforeLoad.player":x.proxy(this._clear,this),"onUpdate.player":x.proxy(this._set,this),"onCancel.player beforeClose.player":x.proxy(this.stop,this)});this._set();q.trigger("onPlayStart")}},stop:function(){this._clear();F.unbind(".player");this.isActive=false;this._timer=this._speed=null;q.trigger("onPlayEnd")},toggle:function(){if(this.isActive){this.stop()}else{this.start.apply(this,arguments)}}};q.overlay={el:null,theme:"",open:function(b){var c=this,e=this.el,d=q.defaults.fixed,f,a;b=x.extend({},q.defaults.overlay,b);if(e){e.stop(true).removeAttr("style").unbind(".overlay")}else{e=x('<div class="fancybox-overlay'+(d?" fancybox-overlay-fixed":"")+'"></div>').appendTo(b.parent||"body")}if(b.closeClick){e.bind("click.overlay",function(g){if(q.lastTouch&&(B()-q.lastTouch)<300){return false}if(q.isActive){q.close()}else{c.close()}return false})}a=b.theme||(q.coming?q.coming.theme:"default");if(a!==this.theme){e.removeClass("fancybox-"+this.theme+"-overlay")}this.theme=a;e.addClass("fancybox-"+a+"-overlay").css(b.css);f=e.css("opacity");if(!this.el&&f<1&&b.speedIn){e.css({opacity:0,filter:"alpha(opacity=0)"}).fadeTo(b.speedIn,f)}this.el=e;if(!d){C.bind("resize.overlay",x.proxy(this.update,this));this.update()}},close:function(b,a){b=x.extend({},q.defaults.overlay,b);if(this.el){this.el.stop(true).fadeOut(b.speedOut,function(){C.unbind("resize.overlay");x(".fancybox-overlay").remove();q.overlay.el=null;if(x.isFunction(a)){a()}})}},update:function(){this.el.css({width:"100%",height:"100%"});this.el.width(F.width()).height(F.height())}};q.touch={startX:0,wrapX:0,dx:0,isMoving:false,_start:function(a){var b=q.current,c=a.originalEvent.touches?a.originalEvent.touches[0]:a,d=B();if(!q.isOpen||q.wrap.is(":animated")||!(x(a.target).is(q.inner)||x(a.target).parent().is(q.inner))){return}if(q.lastTouch&&(d-q.lastTouch)<300){a.preventDefault();q.lastTouch=d;this._cancel(true);q.toggle();return false}q.lastTouch=d;if(q.wrap&&q.wrap.outerWidth()>q.getViewport().w){return}a.preventDefault();if(c&&q.wrap&&q.wrap.outerWidth()<q.getViewport().w){this.startX=c.pageX;this.wrapX=q.wrap.position().left;this.isMoving=true;q.inner.bind("touchmove.fb",x.proxy(this._move,this)).one("touchend.fb touchcancel.fb",x.proxy(this._cancel,this))}},_move:function(a){var b=a.originalEvent.touches?a.originalEvent.touches[0]:a,c=this.startX-b.pageX;if(!this.isMoving||!q.isOpen){return}this.dx=c;if(q.current.wrap.outerWidth(true)<=C.width()){if(Math.abs(c)>=50){a.preventDefault();this.last=0;this._cancel(true);if(c>0){q.next("left")}else{q.prev("right")}}else{if(Math.abs(c)>3){a.preventDefault();this.last=0;q.wrap.css("left",this.wrapX-c)}}}},_clear:function(){this.startX=this.wrapX=this.dx=0;this.isMoving=false},_cancel:function(a){if(q.inner){q.inner.unbind("touchmove.fb")}if(q.isOpen&&Math.abs(this.dx)>3){q.reposition(false)}this._clear()},init:function(){var a=this;if(q.inner&&q.touch){this._cancel(true);q.inner.bind("touchstart.fb",x.proxy(this._start,this))}}};if(!x.easing.easeOutQuad){x.easing.easeOutQuad=function(d,c,e,a,b){return -a*(c/=b)*(c-2)+e}}F.ready(function(){var c,d,e,b;if(x.scrollbarWidth===A){x.scrollbarWidth=function(){var g=x('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),f=g.children(),h=f.innerWidth()-f.height(99).innerWidth();g.remove();return h}}if(x.support.fixedPosition===A){x.support.fixedPosition=(function(){var f=x('<div style="position:fixed;top:20px;padding:0;margin:0;border:0;"></div>').appendTo("body"),g=f.css("position")==="fixed"&&((f[0].offsetTop>18&&f[0].offsetTop<22)||f[0].offsetTop===15);f.remove();return g}())}x.extend(q.defaults,{scrollbarWidth:x.scrollbarWidth(),fixed:x.support.fixedPosition,parent:x("body")});e=C.scrollTop();b=C.scrollLeft();c=x(v).width();r.addClass("fancybox-lock-test");d=x(v).width();r.removeClass("fancybox-lock-test");C.scrollTop(e).scrollLeft(b);q.lockMargin=(d-c);x("<style type='text/css'>.fancybox-margin{margin-right:"+q.lockMargin+"px;}</style>").appendTo("head");var a=x("script[src*='jquery.fancybox.min.js']").attr("src");if(a&&a.match(/autorun/)){x("a[href$='.jpg'],a[href$='.png'],a[href$='.gif'],.fancybox").attr("data-fancybox-group","gallery").fancybox()}});x.fn.fancybox=function(d){var a=this,e=this.length?this.selector:false,b=(e&&e.indexOf("()")<0&&!(d&&d.live===false));var c=function(k){var g=b?x(e):a,f=x(this).blur(),j=d.groupAttr||"data-fancybox-group",h=f.attr(j),i=this.rel;if(!h&&i&&i!=="nofollow"){j="rel";h=i}if(h){f=g.filter("["+j+'="'+h+'"]');d.index=f.index(this)}if(f.length){k.preventDefault();q.open(f.get(),d)}};d=d||{};if(b){F.undelegate(e,"click.fb-start").delegate(e+":not('.fancybox-close,.fancybox-nav,.fancybox-wrap')","click.fb-start",c)}else{a.unbind("click.fb-start").bind("click.fb-start",c)}return this}}(window,document,jQuery));