(function(){function d(a){this._submitSelector=a.submitSelector||'input[type="submit"]';this._listenedBlock=a.listenedBlock||"body";this._resetForm=a.resetForm||true;this._beforeSend=a.beforeSend||null;this._resolve=a.resolve||null;this._reject=a.reject||null;this._maxFileSize=a.maxFileSize||2}d.prototype.init=function(){if(!document.querySelector(this._submitSelector)){return}$(this._listenedBlock).on("click",this.formListeners.bind(this));if($(this._listenedBlock).find('input[type="file"]').length){$(this._listenedBlock).change(this.uploadListener.bind(this))}};d.prototype.validateForm=function(a){var g=true;var h=false;var b=this;$('input[name!="submit"], textarea',$(a)).each(function(){var f=$(this).val();var k=$(this).attr("required");var e="";var l="";$(this).removeClass("form-fail");$(this).removeClass("form-success");if(f.length===0&&k){l="Поле "+($(this).attr("data-name")?'"'+$(this).attr("data-name")+'" ':"")+"обязательное!";g=false}else{if($(this).attr("name")=="email"&&f.length){e=/^([a-z0-9_\.-])+@[a-z0-9-]+\.([a-z]{2,4}\.)?[a-z]{2,4}$/i;if(e.test($(this).val())){$(this).addClass("form-success")}else{l="Введите корректный E-mail!";g=false}}else{if($(this).attr("name")=="phone"&&f.length){e=/^((8|\+7)[\- ]?)?(\(?\d{3}\)?[\- ]?)?[\d\- ]{7,10}$/i;if(e.test($(this).val())){$(this).addClass("form-success")}else{l="Введите корректный телефон!";g=false}}else{if($(this).attr("name")==="passCurr"&&f.length){h=this}else{if($(this).attr("name")==="passNew"&&f.length){if(f===$(h).val()){$(h).val("").addClass("form-fail").attr("placeholder","Новый пароль, не должен совпадать с текущим!");l="Новый пароль, не должен совпадать с текущим!"}else{$(this).addClass("form-success");$(h).addClass("form-success")}}else{if($(this).is("textarea")&&f.length<10&&f.length>0&&k){l="Сообщение слишком короткое!";g=false}else{if(k&&f.length){$(this).addClass("form-success")}}}}}}}if(l){$(this).attr("data-old-placeholder",$(this).attr("placeholder"));$(this).val("").attr("placeholder",l).addClass("form-fail");l='<span class="form-fail">'+l+"</span>";b.changeLabel(this,l,"span.placeholder")}});return g};d.prototype.uploadListener=function(a){var b=a.target;if(!b.matches('input[type="file"]')){return}var e=this.getFileSize(b);if(e<this._maxFileSize*1024*1024){return}alert("Файл слишком большой. Размер вашего файла "+(e/1024/1024).toFixed(2)+" MB. Загружайте файлы меньше "+this._maxFileSize+"MB.");$(b).val("")};d.prototype.getFileSize=function(b){var a;if(typeof ActiveXObject=="function"){a=(new ActiveXObject("Scripting.FileSystemObject")).getFile(b.value)}else{a=b.files[0]}return a.size};d.prototype.changeLabel=function(h,a,b){var i='label[for="'+$(h).attr("id")+'"] '+b||"";var j=$(i);if(j.length){j.each(function(){this.innerHTML=a})}};d.prototype.resetForms=function(a){var b;var f=this;if(a.tagName==="FORM"){b=$(a)}else{b=$("form",$(a))}b.each(function(){f.resetPlaceholders(this);if(f._resetForm){this.reset();f.triggerChange(this)}})};d.prototype.resetPlaceholders=function(a){var f=this;var b;if(a.tagName==="INPUT"){b=$(a)}else{b=$("input[name != submit]",$(a))}b.each(function(){var e=$(this).attr("name");var h=$(this).attr("data-old-placeholder");$(this).removeClass("form-success");$(this).removeClass("form-fail");if(!h){return}$(this).attr("placeholder",h);f.changeLabel(this,h,"span.placeholder")})};d.prototype.triggerChange=function(a){var b=null;if(a.tagName==="INPUT"){b=$(a)}else{b=$("input[name != submit]",$(a))}b.each(function(){$(this).trigger("change")})};d.prototype.formListeners=function(a){var b=a.target;if(!b.matches(this._submitSelector)){return}a.preventDefault();var e=b.closest("form");if(this.validateForm(e)){this.sendRequest(e,this._resolve,this._reject,this._beforeSend)}};d.prototype.sendRequest=function(j,b,i,k){var a=$(j).serializeArray();var l=this;if(k){k.call(this,a,j)}this.showPending(j);$.ajax({type:j.method,url:j.action,data:$.param(a),success:function(e){if(e){l.hidePending(j,l.showSuccess.bind(l,j));if(b){b.call(l,j,e)}}else{l.hidePending(j,l.showError.bind(l,j));if(i){i.call(l,j,e)}}l.resetForms(j)},error:function(e){l.hidePending(j,l.showError.bind(l,j));l.resetForms(j)}})};d.prototype.showError=function(b){var a=$(".err-block",$(b));$(".form-success",$(b)).removeClass("form-success");a.fadeIn("normal");setTimeout(function(){a.fadeOut("normal")},10000)};d.prototype.showSuccess=function(a){var b=$(".succ-block",$(a));$(".form-success",$(a)).removeClass("form-success");b.fadeIn("normal");setTimeout(function(){b.fadeOut("normal")},10000)};d.prototype.showPending=function(a){var b=$(".pend-block",$(a));b.fadeIn("normal")};d.prototype.hidePending=function(b,a){var f=$(".pend-block",$(b));if(!f[0]){a();return}f.fadeOut("normal","linear",a)};$.fn.formController=function(){var b=typeof arguments[0]==="object"?arguments[0]:{};var a=[];$(this).each(function(){if(c(this)){b.listenedBlock=this}var f=new d(b);f.init();a.push(f)});return a};function c(a){return(typeof HTMLElement==="object"?a instanceof HTMLElement:a&&typeof a==="object"&&a!==null&&a.nodeType===1&&typeof a.nodeName==="string")}})();$(document).ready(function(){(function(){function b(a){this._listenedBlock=a.listenedBlock||document.body;this._translationElementSelector=a.translation||false}b.prototype.init=function(){$(this._listenedBlock).on("click",this.anchorClickListener.bind(this))};b.prototype.anchorClickListener=function(k){var o=k.target;var a=o.closest('a[href*="#"]:not([data-scroll="disable"])');if(!a){return}var m=a.closest('a[href^="#"]');var n=window.location.origin+window.location.pathname;var p=a.href.slice(0,a.href.indexOf("#"));if(n===p){m=a}if(!m||m.hash.length<2){return}k.preventDefault();var l=m.hash;var e=this.getTranslation(m);if(!document.querySelector(l)){return}this.smoothScroll(l,e)};b.prototype.getTranslation=function(a){var d=0;if(a.hasAttribute("data-translation")){d=a.getAttribute("data-translation")}else{if(this._translationElementSelector){$(this._translationElementSelector).each(function(){d+=this.offsetHeight})}}return d};b.prototype.smoothScroll=function(a,d){$("html, body").animate({scrollTop:$(a).offset().top-(d||0)},500)};(function(){var a=new b({listenedBlock:".page-wrap"});a.init()})();(function(){var e=new b({listenedBlock:document.getElementById("#m-menu")});f();function f(){var m=$("nav#m-menu");var p=$("#hamburger");var c=$("#m-menu-btn-wrapper");var q=false;var d=a();var o=document.documentElement||document.body;m.mmenu({extensions:["fullscreen"],offCanvas:{moveBackground:false,position:"top",zposition:"front"},navbar:false,navbars:[{content:['<div class="logo"><a href="/"><img src="images/logo.png" alt="logo"></a></div>'],height:2,position:"top"},{content:['<a href="#call-back" class="btn__callback__mobile" data-role="lightbox"><div class="icon__mobile_big"></div></a>'],height:3,position:"bottom"}]});var r=false;m.find("li > a").on("click",function(g){r=this.hash});var n=m.data("mmenu");n.bind("closed",function(){if(r){e.smoothScroll(r);r=false}o.style.paddingRight="";c[0].style.right=0;q=false});p.on("click",function(){if(q){n.close();q=false}else{n.open();o.style.paddingRight=d+"px";c[0].style.right=d+"px";q=true}})}function a(){var c=document.createElement("div");var d=0;$(c).css({width:"100px",height:"100px",overflowY:"scroll",visibility:"hidden"});document.body.appendChild(c);d=c.offsetWidth-c.clientWidth;document.body.removeChild(c);return d}})()})();(function(){var d=$("form");var c=$('input[name="phone"]');c.mask("+7 (999) 999-99-99");d.formController()})();(function(){var b=$('[data-role="lightbox"]');b.fancybox({padding:0,margin:0,tpl:{closeBtn:'<span class="btn__close"></span>'}})})();(function(){var b=$('[data-role="slideDown"]');b.on("click",function(){var a=$(this).attr("data-target");$(this).fadeOut();$(a).slideDown()})})();(function(){function c(a){this._tmpl=a||'<div id="scrollUp"><i class="upButton"></i></div>';this._isActive=false;this.init()}c.prototype.init=function(){this._$btn=$(this._tmpl);$("body").append(this._$btn);this.scrollBtnToggler();this._$btn.on("click",this.scrollTop.bind(this));$(window).on("scroll",this.scrollBtnToggler.bind(this))};c.prototype.scrollBtnToggler=function(){if($(document).scrollTop()>$(window).height()&&!this._isActive){this._$btn.fadeIn({queue:false,duration:400}).animate({bottom:"40px"},400);this._isActive=true}else{if($(document).scrollTop()<$(window).height()&&this._isActive){this._$btn.fadeOut({queue:false,duration:400}).animate({bottom:"-20px"},400);this._isActive=false}}};c.prototype.scrollTop=function(){$("html, body").animate({scrollTop:0},500);return false};var d=new c()})();(function(){if(!document.getElementById("map")){return}var k=document.querySelectorAll("script")[0];var g=document.createElement("script");g.src="https://api-maps.yandex.ru/2.1/?lang=ru_RU";g.async=true;k.parentNode.insertBefore(g,k);var h={coords:[55.82689256889113,37.3328245],hintContent:"Talanta",balloonContent:"Hello!"};g.addEventListener("load",function(){ymaps.ready(j)});var i=$(".map-wrap");var l=false;i.on("mouseleave",function(){i.removeClass("active");l=false});$("body").on("click",function(a){var b=a.target;if($(b).closest(i).length){if(l){return}i.addClass("active");l=true}else{if(!l){return}i.removeClass("active");l=false}});function j(){var a=new ymaps.Map("map",{center:[55.82689256889113,37.3328245],zoom:16},{searchControlProvider:"yandex#search"});var b=new ymaps.Placemark(h.coords,{hintContent:h.hintContent,balloonContent:h.balloonContent},{iconLayout:"default#image",iconImageHref:"images/map-point.png",iconImageSize:[29,39],iconImageOffset:[-14,-39]});a.geoObjects.add(b)}})();(function(){if(!$.fn.blockToggler){return}var h=$(".switch");var i=h.find(".btn__switch");var f=h.find(".switch__on");var g=h.find(".switch__off");var j={animate:"slide",onOpen:function(){f.addClass("active");g.removeClass("active")},onClose:function(){g.addClass("active");f.removeClass("active")}};i.blockToggler(j)})()});